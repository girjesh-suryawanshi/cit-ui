


<div class="card">
  <div class="card-header">
    <div id="titleDiv"> <h3 class="card-title text-white">REQUEST INFORMATION</h3></div>
     <div class="card-tools">
     <button
       type="button"
       class="btn btn-tool"
       data-card-widget="collapse"
     >
       <i class="fas fa-minus"></i>
     </button>
     <button
       type="button"
       class="btn btn-tool"
       data-card-widget="remove"
     >
       <i class="fas fa-times"></i>
     </button>
   </div>
 </div>
 <!-- /.card-header -->
 <div class="card-body">
  <div *ngIf="!(requestInfo.length>0)" class="alert alert-warning text-center" role="alert">
    Request Notification not found !
  </div>

   <div *ngIf="requestInfo !== 'null' && requestInfo.length>0">
     <!-- <hr> -->
     <table class="table table-responsive-md table-hover">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Token number</th>
          <th scope="col">Request Message</th>
          <th scope="col">Requested By</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let info of requestInfo let i = index">
          <td>{{i+1}}</td>
          <td>{{info.tokenNumber}}</td>
          <td>{{info.requestMessage}}</td>
          <td>{{info.requestedUsername}}({{info.requestedName}})</td>
          <td><button class="btn btn-info btn-sm" (click)="onClickReply(info)">Reply</button>
          </td>

        </tr>
      </tbody>
    </table>
    
   </div> 
   <!-- /.d-md-flex -->
 </div>
 <!-- /.card-body -->
</div>


<div class="card">
  <div class="card-header">
    <div id="titleDiv"> <h3 class="card-title text-white">RESPONSE INFORAMTION</h3></div>
     <div class="card-tools">
     <button
       type="button"
       class="btn btn-tool"
       data-card-widget="collapse"
     >
       <i class="fas fa-minus"></i>
     </button>
     <button
       type="button"
       class="btn btn-tool"
       data-card-widget="remove"
     >
       <i class="fas fa-times"></i>
     </button>
   </div>
 </div>
 <!-- /.card-header -->
 <div class="card-body">

  <div *ngIf="!(requestInfoList.length>0)" class="alert alert-warning text-center" role="alert">
    Response Notification not found !
  </div>
   <div *ngIf="requestInfoList !== 'null' && requestInfoList.length>0">
     <!-- <hr> -->
     <table class="table table-responsive-md table-hover">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Token number</th>
          <th scope="col">Request Message</th>
          <th scope="col">Response Message</th>
          <th scope="col">Response by</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let info of requestInfoList let i = index">
          <td>{{i+1}}</td>
          <td>{{info.tokenNumber}}</td>
          <td>{{info.requestMessage}}</td>
          <td>{{info.responseMessage}}
          <td>{{info.username}}({{info.name}})</td>
         <td><button class="btn btn-info btn-sm"(click)="onClickViewResponse(info)">view</button>
          </td>
        </tr>
      </tbody>
    </table>
    
   </div> 
   <!-- /.d-md-flex -->
 </div>
 <!-- /.card-body -->
</div>

  <div class="card border-dark" *ngIf="isViewResponse">
    <div class="card-header text-center  text-white">VIEW RESPONSE INFORAMTION</div>
    <div class="card-body">
      <div class="d-flex justify-content-end p-2 mb-2"><button class="btn btn-info btn-sm"
        (click)="onClickViewResponseBack()"><i class="fa fa-arrow-left fa-lg" aria-hidden="true"></i></button></div>
        <div class="row">
          <div class="col-md-12">
            <div class="card border-0 rounded-0">
               <div class="card-body">
                <div class="table-responsive-md">
                  <table class="table d-flex justify-content-center">
                     <tbody>
                      <tr>
                        <th>Token number</th><td>{{viewResponse.tokenNumber}}</td>
                      </tr>
                      <tr>
                        <th>Request Message</th><td><textarea class="form-control" rows="2" readonly id="remark"[ngModel]="viewResponse.requestMessage"  name="requestMessage"></textarea></td>
                      </tr>
                        <tr>
                          <th>Response Message</th><td><textarea class="form-control" rows="2" readonly id="remark"[ngModel]="viewResponse.responseMessage"  name="remarks"></textarea></td>
                         
                        </tr>
                        <tr>
                          <th>Response By</th> <td>{{viewResponse.username}}({{viewResponse.name}})</td>
                        </tr>
                        <hr>
                        <tr *ngFor="let file of requestInformationFile let i=index">
                         <td>{{i+1}}</td>
                          <td>{{file.originalName}}</td>
                          <td><button class="btn btn-info btn-sm"(click)="onClickViewFile(file)">view</button></td>
                        </tr>
                       </tbody>
                  </table>
                </div>
  
              </div>
            </div>
          
        </div>
      </div>
    </div>
  </div>


  <div class="card mt-2" *ngIf="isReply">
    <div class="card-header text-center  text-white">RESPONSE INFORMATION</div>
    <div class="card-body">
      <div class="d-flex justify-content-end p-2 mb-2"><button class="btn btn-info btn-sm"
          (click)="onClickReplyBack()"><i class="fa fa-arrow-left fa-lg" aria-hidden="true"></i></button></div>
      <form [formGroup]="replyForm" (ngSubmit)="onReplyubmit()">
        <table class="table d-flex justify-content-center">
          <tbody>
            <tr>
              <th>Token Number</th>
              <td><small>{{viewRequest.tokenNumber}}</small></td>
            </tr>
            <tr>
              <th>Reply Message</th>
              <td><textarea class="form-control" rows="2" id="remark" formControlName="replyMessage" name="remarks"
                  required></textarea></td>
            </tr>
            <tr>
              <th>Attachment </th><td><input type="checkbox" class="form-check-input" formControlName="isAttachment" id="exampleCheck1" (click)="isAttachmentClicked()"></td>
            </tr>
            <tr *ngIf="replyForm.value.isAttachment"><th>Maximum file</th><td><font color=red>2 file allow</font></td></tr>
            <tr *ngIf="replyForm.value.isAttachment"><th>Maximum file size</th><td><font color=red>1 Mb</font></td></tr>
            <tr *ngIf="replyForm.value.isAttachment"><th>File type</th><td><font color=red>[ jpg, pdf ,doc ,xls ] only</font></td></tr>
            <tr *ngIf="replyForm.value.isAttachment"><td></td><td ><input type="file" class="form-control-file" (change)="onFileChange($event)"formControlName="attachment" accept="image/*,.pdf,.doc,.docx,.xml,.xls" multiple required></td></tr>
            <tr *ngFor="let file of uploadFiles; let i = index">
              <td>{{i+1}}</td>
              <td>{{file.name}}</td>
              <td> {{file.size/1000000 | number}}Mb</td>
              <td>
                <button class="btn btn-danger btn-sm" type="button" (click)="deleteFieldValue(i)"><i class="fa fa-trash fa-lg" aria-hidden="true"></i></button>
              </td>
            </tr>  
            <tr><th></th><td><button type="submit" [disabled]="replyForm.invalid" class="btn btn-primary btn-sm ml-5">Submit</button></td>
            </tr>
          </tbody>
        </table>
      </form>
      </div>
  </div>