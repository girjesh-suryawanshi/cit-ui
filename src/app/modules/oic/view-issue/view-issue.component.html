<div class="card border-dark" *ngIf="!isView">
  <div class="card-header text-center  text-white">VIEW ISSUE</div>
  <div class="card-body">
    <div *ngIf="!(assignedProblemStatement.length>0)" class="alert alert-warning text-center mt-2 ml-2 mr-2" role="alert">
      <b> No issue not found !!!</b>     
    </div>
    <div *ngIf="(assignedProblemStatement.length>0)" class="row mb-4">
       <div class="col-md-12">
        <div class="card border-0 rounded-0">
          <div class="card-body">
            <div class="table-responsive-md">

              <!-- <nav class="navbar">
                  <input type="text" class="form-control" name="tokenNumber" [(ngModel)]="tokenNumber" (ngModelChange)="search()" placeholder="Enter token number to search">
              </nav> -->
              <table class="table table-responsive-md" *ngIf="!isView">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Token No</th>
                    <th scope="col">location code</th>
                    <th scope="col">Project</th>
                    <th scope="col">Module</th>
                    <th scope="col">Problem</th>
                    <th scope="col">Assigned To</th>
                    <th scope="col">Status</th>
                    <th scope="col">Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor=" let i = index let ps of assignedProblemStatement">
                    <td><small>{{i+1}}</small></td>
                    <td><small><b>{{ps.tokenNumber}}</b></small></td>
                    <td><small>{{ps.locationCode}}</small></td>
                    <td><small>{{ps.projectName}}</small></td>
                    <td><small>{{ps.projectModule}}</small></td>
                    <td><small>{{ps.problemStatement}}</small></td>
                    <td><small>{{ps.assignedUsername}}&nbsp; &nbsp; {{ps.assignedName}}</small></td>
                    <td><span *ngIf="ps.status==='FORWARDED'"
                        class="badge badge-primary rounded-0 p-1">{{ps.status}}</span><span
                        *ngIf="ps.status==='REJECTED'"
                        class="badge badge-warning rounded-0 p-1">{{ps.status}}</span><span
                        *ngIf="ps.status==='COMPLETED'"
                        class="badge badge-success rounded-0 p-1">{{ps.status}}</span><span
                        *ngIf="ps.status==='PENDING'" class="badge badge-danger rounded-0 p-1">{{ps.status}}</span></td>
                    <td><button class="btn btn-info btn-sm" (click)="onClickView(ps)">view</button></td>
                  </tr>
                </tbody>
              </table>
            </div>

          </div>
        </div>
      </div>



    </div>
  </div>
</div>

<div class="card" *ngIf="isView">
  <div class="d-flex justify-content-end p-2 mb-2"><button class="btn btn-info btn-sm" (click)="onClickBack()"><i
    class="fa fa-arrow-left fa-lg" aria-hidden="true"></i></button>
  </div>
  <div class="card-header">
   <div id="titleDiv">
    <h3 class="card-title text-white text-center">ISSUE DETAILS</h3>
   </div> 

    <div class="card-tools">
      <button
        type="button"
        class="btn btn-tool"
        data-card-widget="collapse"
      >
        <i class="fas fa-minus"></i>
      </button>
      <button
        type="button"
        class="btn btn-tool"
        data-card-widget="remove"
      >
        <i class="fas fa-times"></i>
      </button>
    </div>
  </div>
  <!-- /.card-header -->
  <div class="card-body">
    <div>
      <div class="table-responsive-md">
        <table class="table table-hover">
           <tbody>
            <tr>
              <td><b>Token Number</b></td>
              <td><span class="badge badge-warning rounded-0 p-1">{{viewIssue.tokenNumber}}</span></td>
              <td><b>Status</b></td>
              <td><span *ngIf="viewIssue.status==='COMPLETED'"
                  class="badge badge-success rounded-0 p-1">{{viewIssue.status}}</span>
                  <span
                  *ngIf="viewIssue.status==='PENDING'"
                  class="badge badge-danger rounded-0 p-1">{{viewIssue.status}}</span>
                  <span
                  *ngIf="viewIssue.status==='FORWARDED'"
                  class="badge badge-primary rounded-0 p-1">{{viewIssue.status}}</span>
                  <span
                  *ngIf="viewIssue.status==='REJECTED'"
                  class="badge badge-warning rounded-0 p-1">{{viewIssue.status}}</span>
    
                </td>
            </tr>
            
            <tr>
              <td><b>Created By</b></td>
              <td>{{viewIssue.username}} ( {{viewIssue.name}} )</td>
              <td><b>Created On</b></td>
              <td>{{viewIssue.createdOn | date:'medium' }}</td>
            </tr>
    
            <tr>
              <td><b>Location code</b></td>
              <td>{{viewIssue.locationCode}}</td>
              <td><b>Location Name</b></td>
              <td>{{viewIssue.locationName}}</td>
            </tr>
    
            <tr>
              <td><b>Project Name</b></td>
              <td>{{viewIssue.projectName}}</td>
              <td><b>Project Module</b></td>
              <td>{{viewIssue.projectModule}}</td>
            </tr>
            <tr>
              <td><b>Problem Statement</b></td>
              <td>{{viewIssue.problemStatement}}</td>
              <td><b>Description</b></td><td>{{viewIssue.description}}</td>
            </tr>
            
          </tbody>
    
        </table>
        
        <table class="table table-responsive-md" *ngIf="files && files.length>0">
          <thead class="thead-dark text-center">
            <th colspan="3">
              <h5>ATTACHED FILES</h5>
            </th>
          </thead>
          <tbody>
            <tr>
              <th>#</th>
              <th>File name</th>
              <th>Action</th>
            </tr>
            <tr *ngFor="let file of files let i = index">
              <td>{{i+1}}</td>
              <td><small>{{file.originalName}}</small></td>
              <td><button class="btn btn-info btn-sm" (click)="viewFileClicked(file)">view</button></td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <!-- /.card-pane-right -->
    </div>
    <!-- /.d-md-flex -->
  </div>
  <!-- /.card-body -->
</div>
<div class="card" *ngIf="isView">
  <div class="card-header">
    <div id="titleDiv"> <h3 class="card-title text-white">ISSUE CURRENT STATUS</h3></div>
  

   <div class="card-tools">
     <button
       type="button"
       class="btn btn-tool"
       data-card-widget="collapse"
     >
       <i class="fas fa-minus"></i>
     </button>
     <button
       type="button"
       class="btn btn-tool"
       data-card-widget="remove"
     >
       <i class="fas fa-times"></i>
     </button>
   </div>
 </div>
 <!-- /.card-header -->
 <div class="card-body">
   <div *ngIf="statusList && statusList.length>0">
     <!-- <hr> -->
     <table class="table table-responsive-md">
           
       <tbody>
         <tr>
           <th>#</th>
           <th>Token Number</th>
           <th>Status</th>
           
           <th>Comments</th>
           <th>Assigned User</th>
           <th>Date/Time</th>
         </tr>
         <tr *ngFor="let status of statusList let i = index">
           <td><small>{{i+1}}</small></td>
           <td><small><b>{{status.tokenNumber}}</b></small></td>
           <td><span *ngIf="status.status==='COMPLETED'"
             class="badge badge-success rounded-0 p-1">{{status.status}}</span>
           <span *ngIf="status.status==='REJECTED'"
             class="badge badge-warning rounded-0 p-1">{{status.status}}</span>
           <span *ngIf="status.status==='PENDING'"
             class="badge badge-danger rounded-0 p-1">{{status.status}}</span>
             <span *ngIf="status.status==='FORWARDED'"
             class="badge badge-primary rounded-0 p-1">{{status.status}}</span></td>
           <td *ngIf="status.status === 'PENDING'"></td>
           <td *ngIf="status.userComments !== null"><small>{{status.userComments}}</small></td>
           <td><small>{{status.username}}({{status.name}})</small></td>
           <td><small>{{status.createdOn | date:'medium'}}</small></td>
                  </tr>
       </tbody>
     </table>
   </div> 
   <!-- /.d-md-flex -->
 </div>
 <!-- /.card-body -->
</div>